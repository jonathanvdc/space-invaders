<Scene name="Atari space invaders">
    <Fonts>
        <Font id="font" path="consola.ttf" />
    </Fonts>
    <Textures>
        <Texture id="starship-tex" path="level2/assets/starship-red.png" />
        <Texture id="projectile-tex" path="level2/effects/kogelke-up.png" />
        <Texture id="invader3-tex" path="level2/assets/invader3.png" />
        <Texture id="invader4-tex" path="level2/assets/invader4.png" />
        <Texture id="invader5-tex" path="level2/assets/invader5.png" />
        <Texture id="yellow-martian-tex" path="level2/assets/yellow-martian.png" />
        <Texture id="white-martian-tex" path="level2/assets/white-martian.png" />
        <Texture id="kaboum-tex" path="level2/effects/kaboum-level2.png" />
        <Texture id="background-tex" path="level2/background/background-evilplanet.jpg" />
        <Texture id="text-background-tex" path="level2/background/text-background.png" />
    </Textures>
    <Music>
        <Music id="music-ufo" path="level1/sounds/UFO.wav" />
        <Music id="music-level1" path="level1/sounds/music-level1.wav" />
    </Music>
    <Sounds>
        <Sound id="you-died" path="level1/sounds/you-just-died.wav" />
        <Sound id="photon" path="level1/sounds/photon.wav" />
        <Sound id="laser" path="level1/sounds/laser.wav" />
        <Sound id="wave-success" path="level1/sounds/cheers.wav" />
        <Sound id="level-success" path="level1/sounds/victory.wav" />
    </Sounds>
    <Assets>
        <Box id="yellow-martian">
            <AnimatedSprite texture="yellow-martian-tex" frameCount="2" cycleDuration="1.0" />
        </Box>
        <Box id="white-martian">
            <AnimatedSprite texture="white-martian-tex" frameCount="2" cycleDuration="1.0" />
        </Box>
        <Box id="invader5">
            <AnimatedSprite texture="invader5-tex" frameCount="2" cycleDuration="1.0" />
        </Box>
        <Box id="invader3">
            <AnimatedSprite texture="invader3-tex" frameCount="2" cycleDuration="1.0" />
        </Box>
        <Box id="invader4">
            <AnimatedSprite texture="invader4-tex" frameCount="2" cycleDuration="1.0" />
        </Box>
        <Box id="starship">
            <Group>
                <Sprite texture="starship-tex" />
                <Box posX="0.4825" posY="0.5" width="0.004">
                    <RibbonParticle r="1.0" g="1.0" b="0.0" />
                </Box>
                <Box posX="0.1" posY="0.4" width="0.004">
                    <RibbonParticle r="1.0" g="0.6" b="0.0" />
                </Box>
                <Box posX="0.9" posY="0.4" width="0.004">
                    <RibbonParticle r="1.0" g="0.6" b="0.0" />
                </Box>
            </Group>
        </Box>
        <Box id="projectile">
            <Group>
                <Sprite texture="projectile-tex" />
            </Group>
        </Box>
        <Box id="explosion">
            <AnimatedSprite texture="kaboum-tex" frameCount="37" cycleDuration="2.0" />
        </Box>
        <Sprite id="background-image" texture="background-tex" />
        <Box id="comment-easy-start" width="0.8" height="0.2" posY="0.4" posX="0.1">
            <Group>
                <Sprite texture="text-background-tex" />
                <Box posY="0.4" height="0.6" posX="0.2" width="0.6">
                    <Text text="Here they come. Good luck!" font="font" r="0.3" g="0.1" b="0.4" />
                </Box>
            </Group>
        </Box>
        <Box id="comment-you-died" width="0.8" height="0.2" posY="0.4" posX="0.1">
            <Group>
                <Sprite texture="text-background-tex" />
                <Box posY="0.3" height="0.6" posX="0.2" width="0.6">
                    <Text text="Ouch! You died." font="font" r="0.3" g="0.1" b="0.4" />
                </Box>
            </Group>
        </Box>
        <Box id="comment-aliens-escaped" width="0.8" height="0.2" posY="0.4" posX="0.1">
            <Group>
                <Sprite texture="text-background-tex" />
                <Box posY="0.3" height="0.6" posX="0.2" width="0.6">
                    <Text text="The aliens have landed. All is lost." font="font" r="0.3" g="0.1" b="0.4" />
                </Box>
            </Group>
        </Box>
        <Box id="comment-you-survived" width="0.8" height="0.2" posY="0.4" posX="0.1">
            <Group>
                <Sprite texture="text-background-tex" />
                <Box posY="0.4" height="0.6" posX="0.2" width="0.6">
                    <Text text="You survived. Good job!" font="font" r="0.3" g="0.1" b="0.4" />
                </Box>
            </Group>
        </Box>
        <Box id="comment-well-done" width="0.8" height="0.2" posY="0.4" posX="0.1">
            <Group>
                <Sprite texture="text-background-tex" />
                <Box posY="0.4" height="0.6" posX="0.2" width="0.6">
                    <Text text="First wave incoming." font="font" r="0.3" g="0.1" b="0.4" />
                </Box>
            </Group>
        </Box>
        <Box id="comment-wave-two" width="0.8" height="0.2" posY="0.4" posX="0.1">
            <Group>
                <Sprite texture="text-background-tex" />
                <Box posY="0.4" height="0.6" posX="0.2" width="0.6">
                    <Text text="Second wave. Watch out now." font="font" r="0.3" g="0.1" b="0.4" />
                </Box>
            </Group>
        </Box>
        <Box id="comment-wave-three" width="0.8" height="0.2" posY="0.4" posX="0.1">
            <Group>
                <Sprite texture="text-background-tex" />
                <Box posY="0.4" height="0.6" posX="0.2" width="0.6">
                    <Text text="Third wave. Get ready." font="font" r="0.3" g="0.1" b="0.4" />
                </Box>
            </Group>
        </Box>
        <Box id="comment-wave-four" width="0.8" height="0.2" posY="0.4" posX="0.1">
            <Group>
                <Sprite texture="text-background-tex" />
                <Box posY="0.4" height="0.6" posX="0.2" width="0.6">
                    <Text text="Fourth wave. You can do it!" font="font" r="0.3" g="0.1" b="0.4" />
                </Box>
            </Group>
        </Box>
        <Box id="comment-boss-fight" width="0.8" height="0.2" posY="0.4" posX="0.1">
            <Group>
                <Sprite texture="text-background-tex" />
                <Box posY="0.4" height="0.6" posX="0.2" width="0.6">
                    <Text text="Boss fight, coming right at you." font="font" r="0.3" g="0.1" b="0.4" />
                </Box>
            </Group>
        </Box>
    </Assets>
    <Player mass="200" radius="0.025" health="20" posY="0.9" asset="starship" accel="0.2" velY="-0.05" fireInterval="0.2">
        <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile">
            <Controllers>
                <Gravity G="0.00001" falloff="2" />
            </Controllers>
            <Created>
                <Sound sound="photon" />
            </Created>
        </Projectile>
        <Destroyed>
            <Concurrent>
                <Sound sound="you-died" />
                <SetFlag flag="game-active" value="false" />
            </Concurrent>
        </Destroyed>
    </Player>
    <Background>
        <Asset asset="background-image" />
    </Background>
    <Decor>
    </Decor>
    <Timeline>
        <SetFlag flag="game-active" value="true" />
        <Condition predicate="game-active" >
            <Then>
                <Timeline>
                    <Background>
                        <Main>
                            <Music music="music-ufo" />
                        </Main>
                        <Extra>
                            <Show asset="comment-easy-start"/>
                        </Extra>
                    </Background>
                    <Background>
                        <Extra>
                            <Loop>
                                <Music music="music-level1"/>
                            </Loop>
                        </Extra>
                        <Main>
                            <Timeline>
                                <Deadline duration="2.0">
                                    <Wait />
                                </Deadline>
                                <Concurrent>
                                    <Wave posX="0.5" rows="1" columns="3">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.0" velY="0.05" fireInterval="5.0" fireIntervalDeviation="2.0" asset="white-martian" >
                                            <DestroyedEffect asset="explosion" duration="2.0" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                        <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile" >
                                            <Created>
                                                <Sound sound="laser" />
                                            </Created>
                                        </Projectile>
                                    </Wave>
                                </Concurrent>
                                <Concurrent>
                                    <Sound sound="wave-success" />
                                    <Deadline duration="3">
                                        <Show asset="comment-well-done"/>
                                    </Deadline>
                                </Concurrent>
                                <Concurrent>
                                    <Wave posX="0.5" rows="1" columns="1">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.0" velY="0.02" fireIntervalDeviation="0.2" asset="invader4" >
                                            <DestroyedEffect asset="explosion" duration="2.0" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                    </Wave>
                                    <Wave posY="0.1" posX="0.25" rows="1" columns="4">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.0" velY="0.02" fireIntervalDeviation="0.2" asset="yellow-martian" >
                                            <DestroyedEffect asset="explosion" duration="2.0" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                    </Wave>
                                    <Wave posY="0.1" posX="0.75" rows="1" columns="4">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.0" velY="0.02" fireIntervalDeviation="0.2" asset="white-martian" >
                                            <DestroyedEffect asset="explosion" duration="2.5" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                    </Wave>
                                    <Wave posY="0.2" rows="2" columns="5">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.0" velY="0.02" fireInterval="5.0" fireIntervalDeviation="2.0" asset="invader3" >
                                            <DestroyedEffect asset="explosion" duration="2.5" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                        <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile" >
                                            <Created>
                                                <Sound sound="laser" />
                                            </Created>
                                        </Projectile>
                                    </Wave>
                                </Concurrent>
                                <Concurrent>
                                    <Sound sound="wave-success" />
                                    <Deadline duration="3">
                                        <Show asset="comment-wave-two"/>
                                    </Deadline>
                                </Concurrent>
                                <Concurrent>
                                    <Wave posX="0.5" rows="1" columns="1">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.0" velY="0.04" fireIntervalDeviation="0.2" asset="invader3" >
                                            <DestroyedEffect asset="explosion" duration="2.0" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                    </Wave>
                                    <Wave posY="0.1" posX="0.25" rows="1" columns="2">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.0" velY="0.04" fireInterval="5.0" fireIntervalDeviation="2.0" asset="yellow-martian" >
                                            <DestroyedEffect asset="explosion" duration="2.0" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                        <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile" >
                                            <Created>
                                                <Sound sound="laser" />
                                            </Created>
                                        </Projectile>
                                    </Wave>
                                    <Wave posY="0.1" posX="0.75" rows="1" columns="2">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.0" velY="0.04" fireInterval="5.0" fireIntervalDeviation="2.0" asset="white-martian" >
                                            <DestroyedEffect asset="explosion" duration="2.5" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                        <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile" >
                                            <Created>
                                                <Sound sound="laser" />
                                            </Created>
                                        </Projectile>
                                    </Wave>
                                    <Wave posY="0.2" rows="2" columns="5">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.0" velY="0.04" fireInterval="5.0" fireIntervalDeviation="2.0" asset="invader3" >
                                            <DestroyedEffect asset="explosion" duration="2.5" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                        <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile" >
                                            <Created>
                                                <Sound sound="laser" />
                                            </Created>
                                        </Projectile>
                                    </Wave>
                                </Concurrent>
                                <Concurrent>
                                    <Sound sound="wave-success" />
                                    <Deadline duration="3">
                                        <Show asset="comment-wave-three"/>
                                    </Deadline>
                                </Concurrent>
                                <Concurrent>
                                    <Wave posX="0.5" rows="1" columns="4">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.2" velY="0.05" asset="invader5" >
                                            <DestroyedEffect asset="explosion" duration="2.0" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                        </Ship>
                                        <Controllers>
                                            <OnLeave>
                                                <Concurrent>
                                                    <SetFlag flag="game-active" value="false" />
                                                    <SetFlag flag="aliens-escaped" value="true" />
                                                </Concurrent>
                                            </OnLeave>
                                        </Controllers>
                                    </Wave>
                                    <Wave posY="0.1" posX="0.25" rows="1" columns="4">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.2" velY="0.05" fireInterval="5.0" fireIntervalDeviation="2.0" asset="yellow-martian" >
                                            <DestroyedEffect asset="explosion" duration="2.0" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                        </Ship>
                                        <Controllers>
                                            <OnLeave>
                                                <Concurrent>
                                                    <SetFlag flag="game-active" value="false" />
                                                    <SetFlag flag="aliens-escaped" value="true" />
                                                </Concurrent>
                                            </OnLeave>
                                        </Controllers>
                                        <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile" >
                                            <Created>
                                                <Sound sound="laser" />
                                            </Created>
                                        </Projectile>
                                    </Wave>
                                    <Wave posY="0.1" posX="0.75" rows="1" columns="4">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.2" velY="0.05" fireInterval="5.0" fireIntervalDeviation="2.0" asset="white-martian" >
                                            <DestroyedEffect asset="explosion" duration="2.5" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                        </Ship>
                                        <Controllers>
                                            <OnLeave>
                                                <Concurrent>
                                                    <SetFlag flag="game-active" value="false" />
                                                    <SetFlag flag="aliens-escaped" value="true" />
                                                </Concurrent>
                                            </OnLeave>
                                        </Controllers>
                                        <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile" >
                                            <Created>
                                                <Sound sound="laser" />
                                            </Created>
                                        </Projectile>
                                    </Wave>
                                    <Wave posY="0.2" rows="2" columns="5">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.2" velY="0.05" fireInterval="5.0" fireIntervalDeviation="2.0" asset="invader3" >
                                            <DestroyedEffect asset="explosion" duration="2.5" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                        </Ship>
                                        <Controllers>
                                            <OnLeave>
                                                <Concurrent>
                                                    <SetFlag flag="game-active" value="false" />
                                                    <SetFlag flag="aliens-escaped" value="true" />
                                                </Concurrent>
                                            </OnLeave>
                                        </Controllers>
                                        <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile" >
                                            <Created>
                                                <Sound sound="laser" />
                                            </Created>
                                        </Projectile>
                                    </Wave>
                                </Concurrent>
                                <Concurrent>
                                    <Sound sound="wave-success" />
                                    <Deadline duration="3">
                                        <Show asset="comment-wave-four"/>
                                    </Deadline>
                                </Concurrent>
                                <Concurrent>
                                    <Wave rows="1" columns="10">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.2" velY="0.05" fireInterval="2.0" fireIntervalDeviation="0.2" asset="yellow-martian" >
                                            <DestroyedEffect asset="explosion" duration="2.5" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                    </Wave>
                                    <Wave posY="0.1" rows="1" columns="10">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.2" velY="0.05" fireInterval="2.0" fireIntervalDeviation="0.2" asset="invader4" >
                                            <DestroyedEffect asset="explosion" duration="2.5" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                    </Wave>
                                    <Wave posY="0.2" rows="1" columns="10">
                                        <Ship mass="200" radius="0.025" health="5" velX="0.2" velY="0.05" fireInterval="3.0" fireIntervalDeviation="0.5" asset="invader5" >
                                            <DestroyedEffect asset="explosion" duration="2.5" />
                                            <Destroyed>
                                                <Sound sound="you-died" />
                                            </Destroyed>
                                            <Controllers>
                                                <OnLeave>
                                                    <Concurrent>
                                                        <SetFlag flag="game-active" value="false" />
                                                        <SetFlag flag="aliens-escaped" value="true" />
                                                    </Concurrent>
                                                </OnLeave>
                                            </Controllers>
                                        </Ship>
                                        <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile" >
                                            <Created>
                                                <Sound sound="laser" />
                                            </Created>
                                        </Projectile>
                                    </Wave>
                                </Concurrent>
                                <Concurrent>
                                    <Sound sound="wave-success" />
                                    <Deadline duration="3">
                                        <Show asset="comment-boss-fight"/>
                                    </Deadline>
                                </Concurrent>
                                <Wave posY="0.2" rows="1" columns="1">
                                    <Ship mass="200" radius="0.05" health="100" velX="0.2" velY="0.05" fireInterval="1.0" fireIntervalDeviation="0.2" asset="invader5" >
                                        <DestroyedEffect asset="explosion" duration="2.5" />
                                        <Destroyed>
                                            <Sound sound="you-died" />
                                        </Destroyed>
                                        <Controllers>
                                            <OnLeave>
                                                <Concurrent>
                                                    <SetFlag flag="game-active" value="false" />
                                                    <SetFlag flag="aliens-escaped" value="true" />
                                                </Concurrent>
                                            </OnLeave>
                                        </Controllers>
                                    </Ship>
                                    <Projectile mass="10" radius="0.005" velX="0.2" velY="0.2" asset="projectile" >
                                        <Created>
                                            <Sound sound="laser" />
                                        </Created>
                                    </Projectile>
                                </Wave>
                            </Timeline>
                        </Main>
                    </Background>
                    <Sound sound="level-success" />
                    <Permanent>
                        <Show asset="comment-you-survived" />
                    </Permanent>
                </Timeline>
            </Then>
            <Else>
                <Condition predicate="aliens-escaped">
                    <Then>
                        <Show asset="comment-aliens-escaped" />
                    </Then>
                    <Else>
                        <Show asset="comment-you-died" />
                    </Else>
                </Condition>
            </Else>
        </Condition>
    </Timeline>
</Scene>
